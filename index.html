<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>香港之旅 - 旅遊管理系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root { --color-blue: #4169E1; --color-red: #D93025; }
        .text-royal-blue { color: var(--color-blue); }
        .bg-royal-blue { background-color: var(--color-blue); }
        
        /* 選單滑入動畫 */
        .menu-enter-active, .menu-leave-active { transition: transform 0.3s ease; }
        .menu-enter-from, .menu-leave-to { transform: translateX(100%); }

        /* 彈窗縮放動畫 */
        .scale-in-center {
            animation: scale-in-center 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
        }
        @keyframes scale-in-center {
            0% { transform: scale(0.7); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50">

<div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-xl relative overflow-x-hidden">

    <header class="sticky top-0 z-30 bg-white border-b p-4 flex justify-between items-center">
        <div>
            <h1 class="text-xl font-bold text-gray-800">{{ pageTitle }}</h1>
            <p class="text-[10px] text-gray-400" v-if="isEditMode">模式：編輯中</p>
        </div>
        
        <div class="flex items-center space-x-3">
            <button @click="isEditMode = !isEditMode" 
                    :class="isEditMode ? 'bg-red-500 text-white' : 'bg-gray-100 text-gray-600'"
                    class="text-xs px-3 py-1 rounded-full font-bold transition">
                {{ isEditMode ? '退出' : '編輯' }}
            </button>
            <button @click="isMenuOpen = true" class="text-gray-600 text-xl p-1">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <div v-if="isMenuOpen" @click="isMenuOpen = false" class="fixed inset-0 bg-black/50 z-40"></div>
    
    <transition name="menu">
        <nav v-if="isMenuOpen" class="fixed top-0 right-0 h-full w-64 bg-white z-50 shadow-2xl p-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="font-bold text-lg">功能選單</h2>
                <button @click="isMenuOpen = false" class="text-gray-400"><i class="fas fa-times"></i></button>
            </div>
            <ul class="space-y-2">
                <li v-for="menu in menus" :key="menu.tab" 
                    @click="activeTab = menu.tab; isMenuOpen = false"
                    :class="activeTab === menu.tab ? 'bg-blue-50 text-royal-blue font-bold' : 'text-gray-600'"
                    class="flex items-center space-x-3 p-3 cursor-pointer rounded-xl transition">
                    <i :class="menu.icon" class="w-6"></i>
                    <span>{{ menu.name }}</span>
                </li>
            </ul>
        </nav>
    </transition>

    <main class="p-4 min-h-[80vh]">
        <section v-if="activeTab === 'itinerary'">
            <div v-if="isEditMode" class="mb-4">
                <button @click="openModal" class="w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 text-sm hover:bg-gray-50 transition">
                    + 新增行程項目
                </button>
            </div>
        
            <div v-if="itineraryList.length > 0" class="space-y-3">
                <div v-for="item in itineraryList" :key="item.id" class="p-4 bg-white border rounded-xl shadow-sm border-l-4 border-royal-blue">
                    <div class="flex justify-between items-center">
                        <span class="text-xs font-bold text-royal-blue"><i class="far fa-clock mr-1"></i>{{ item.time }}</span>
                        <span class="text-[10px] px-2 py-0.5 bg-gray-100 rounded text-gray-500">{{ item.category }}</span>
                    </div>
                    <h3 class="font-bold text-gray-800 mt-1 text-lg">{{ item.name }}</h3>
                </div>
            </div>
            
            <div v-else class="text-center py-20 text-gray-300">
                <i class="fas fa-calendar-day text-5xl mb-3"></i>
                <p>尚無行程資料</p>
            </div>
        </section>
        
        <section v-if="activeTab === 'info'">
            <div class="text-center py-20 text-gray-300">
                <i class="fas fa-info-circle text-5xl mb-3"></i>
                <p>尚無旅行資訊</p>
            </div>
        </section>

        <section v-if="['shopping', 'food', 'expense'].includes(activeTab)">
            <div class="text-center py-20 text-gray-300">
                <i class="fas fa-folder-open text-5xl mb-3"></i>
                <p>功能開發中...</p>
            </div>
        </section>

    </main>
    
    <div v-if="showModal" class="fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div @click="showModal = false" class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
        
        <div class="relative bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden scale-in-center">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">新增行程項目</h2>
                    <button @click="showModal = false" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">景點名稱</label>
                        <input v-model="newItem.name" type="text" placeholder="例如：維多利亞港" 
                               class="w-full border-b-2 border-gray-100 p-2 focus:border-royal-blue outline-none transition-colors text-lg">
                    </div>
    
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">開始時間</label>
                            <input v-model="newItem.time" type="time" class="w-full border-b-2 border-gray-100 p-2 focus:border-royal-blue outline-none transition-colors">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">停留時間</label>
                            <select v-model="newItem.duration" class="w-full border-b-2 border-gray-100 p-2 focus:border-royal-blue outline-none transition-colors bg-transparent">
                                <option value="15">15 分鐘</option>
                                <option value="30">30 分鐘</option>
                                <option value="45">45 分鐘</option>
                                <option value="60">1 小時</option>
                                <option value="90">1.5 小時</option>
                                <option value="120">2 小時</option>
                                <option value="180">3 小時</option>
                                <option value="240">4 小時</option>
                            </select>
                        </div>
                    </div>
    
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">項目類別</label>
                        <select v-model="newItem.category" class="w-full border-b-2 border-gray-100 p-2 focus:border-royal-blue outline-none transition-colors bg-transparent">
                            <option>景點</option>
                            <option>美食</option>
                            <option>交通</option>
                            <option>購物</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-10">
                    <button @click="showModal = false" class="flex-1 py-3 text-gray-400 font-bold hover:bg-gray-50 rounded-xl transition">取消</button>
                    <button @click="addItem" class="flex-1 py-3 bg-royal-blue text-white rounded-xl font-bold shadow-lg shadow-blue-200 active:scale-95 transition">確認新增</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="p-8 text-center text-gray-300 text-xs">
        &copy; 2024 香港之旅管理系統
    </footer>

</div>

<script>
    // 確保 Vue 已成功載入
    const { createApp, ref, computed } = Vue;

    const app = createApp({
        setup() {
            // 1. 基礎狀態
            const isEditMode = ref(false);
            const isMenuOpen = ref(false);
            const activeTab = ref('itinerary');

            // 2. 彈窗與資料列表
            const showModal = ref(false);
            const itineraryList = ref([]); // 這裏是關鍵，初始化為空陣列
            const newItem = ref({
                name: '',
                time: '09:00',
                category: '景點'
            });

            // 3. 選單配置
            const menus = [
                { tab: 'itinerary', name: '每日行程', icon: 'fas fa-calendar-alt' },
                { tab: 'info', name: '旅行資訊', icon: 'fas fa-info-circle' },
                { tab: 'shopping', name: '購物清單', icon: 'fas fa-shopping-basket' },
                { tab: 'food', name: '美食清單', icon: 'fas fa-utensils' },
                { tab: 'expense', name: '花費紀錄', icon: 'fas fa-hand-holding-usd' }
            ];

            // 4. 計算屬性
            const pageTitle = computed(() => {
                const current = menus.find(m => m.tab === activeTab.value);
                return current ? current.name : '旅遊助手';
            });

            // 5. 方法 (Methods)
            const openModal = () => {
                newItem.value = { name: '', time: '09:00', category: '景點' };
                showModal.value = true;
            };

            const addItem = () => {
                if (!newItem.value.name.trim()) {
                    alert('請輸入景點名稱！');
                    return;
                }
                // 將新項目加入清單
                itineraryList.value.push({
                    id: Date.now(),
                    ...newItem.value
                });
                // 自動依據時間排序
                itineraryList.value.sort((a, b) => a.time.localeCompare(b.time));
                // 關閉彈窗
                showModal.value = false;
            };

            // 6. 重要：回傳所有要在 HTML 中使用的東西
            return {
                isEditMode, isMenuOpen, activeTab, menus, pageTitle,
                showModal, itineraryList, newItem,
                openModal, addItem
            };
        }
    });

    // 最後掛載到 DOM
    app.mount('#app');
</script>

</body>
</html>
